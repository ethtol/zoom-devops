name: PR Summary using OpenAI

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:

    - name: Check out repo
      uses: actions/checkout@v2

    - name: Use Node
      uses: actions/setup-node@v2

      with:
        node-version: '16.x'

    - name: Install deps
      run: npm install

    - name: Run PR summary action
      uses: skarthikeyan96/typescript-custom-action@0.0.1

      with:
        OPENAI_API_KEY:  ${{ secrets.OPENAI_API_KEY }}
        GITHUB_TOKEN: ${{ secrets.API_TOKEN }}



# name: PR Summary Generator

# on:
#   pull_request:
#     branches:
#       - main

# jobs:
#   pr_agent_job:
#     runs-on: ubuntu-latest
#     permissions:
#       issues: write
#       pull-requests: write
#       contents: write
#     name: Run pr agent on every pull request, respond to user comments
#     steps:
#       - name: PR Agent action step
#         id: pragent
#         uses: Codium-ai/pr-agent@main
#         env:
#           OPENAI_KEY: ${{ secrets.OPENAI_API_KEY }}
#           GITHUB_TOKEN: ${{ secrets.API_TOKEN }}
#           pr_description.use_description_markers: "true"
#           pr_description.include_generated_by_header: "true"
#           github_action.auto_review: "true"
#           github_action.auto_describe: "true"
#           github_action.auto_improve: "true"
#           pr_update_changelog.push_changelog_changes: "true"
